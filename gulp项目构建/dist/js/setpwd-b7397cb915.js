/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},SetPwd=function(t){this.options=$.extend({sel:"",hrefParma:util.getHrefParma(),pwdReg:/^[^\u4e00-\u9fa5\s]+$/,msg:{m1:"请输入密码",m2:"请输入确认密码",m3:"两次输入不一致",m4:"密码设置成功",m5:"密码长度限制为6~18位",m6:"密码不能包含汉字或空格"},requestState:{save:!0}},t),this.sel=this.options.sel,this.el=$(this.sel)};$.extend(SetPwd.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this;t.options.hrefParma},_save:function(t){var e=this;util.api({surl:root.MB_API_PATH+"modupwd",data:{npwd:t},type:"post",beforeSend:function(){e.options.requestState.save=!1},success:function(t){var i=t.rpco;t.body||{};switch(i){case 200:util.tip(e.options.msg.m4),setTimeout(function(){util.href("set.html")},300);break;default:util.tip("保存失败")}},complete:function(){e.options.requestState.save=!0}})},save:function(){var t=this,e=$("#newPwd").val(),i=$("#cfmPwd").val();return!!t.options.requestState.save&&(e?t.options.pwdReg.test(e)?e.length<6||e.length>18?(util.tip(t.options.msg.m5),!1):i?e!=i?(util.tip(t.options.msg.m3),!1):void t._save(e):(util.tip(t.options.msg.m2),!1):(util.tip(t.options.msg.m6),!1):(util.tip(t.options.msg.m1),!1))},addEvent:function(){var t=this,e=util.getClick();t.options.hrefParma;$("#save").on(e,function(){t.save()})}});