/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},SetSignature=function(t){this.options=$.extend({sel:"",hrefParma:util.getHrefParma(),signReg:/^[^\s]+$/,msg:{m1:"请输入签名",m2:"不能包含空格"},requestState:{save:!0}},t),this.sel=this.options.sel,this.el=$(this.sel)};$.extend(SetSignature.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this,i=t.options.hrefParma;i.sign&&$("#sign").html(util.decode(i.sign)),t.setSignTxtcou()},_save:function(t){var i=this;util.api({surl:root.MB_API_PATH+"modudtal",data:{mod:8,sign:t},type:"post",beforeSend:function(){i.options.requestState.save=!1},success:function(t){var i=t.rpco;switch(i){case 200:util.href("set.html");break;default:util.tip("保存失败")}},complete:function(){i.options.requestState.save=!0}})},save:function(){var t=this,i=$("#sign").val()||"";return i?t.options.signReg.test(i)?void t._save(i):(util.tip(t.options.msg.m2),!1):(util.tip(t.options.msg.m1),!1)},setSignTxtcou:function(){$("#signcou").html(function(){var t=$("#sign").attr("maxlength")-$("#sign").val().length;return t=t<0?0:t,"可输"+t+"字"})},addEvent:function(){var t=this,i=util.getClick();t.options.hrefParma;t.el.on(i,"#save",function(){t.save()}),t.el.on("input propertychange","#sign",function(){t.setSignTxtcou()})}});