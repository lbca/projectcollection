/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},AccSearchInput=function(t){this.options=$.extend({sel:"",hrefParma:util.getHrefParma(),ACTYPE:{1:"国美会员卡",2:"永乐会员卡",3:"大中会员卡",5:"库巴卡",6:"极信国美卡",7:"极信大中卡",8:"极信永乐卡"},downTime:10,uiqcd:"",msg:{m1:"请选择会员卡类型",m2:"会员卡类型有误，请重新选择",m3:"请输入会员卡号",m4:"该会员卡未绑定手机号",m5:"不存在此会员卡",m6:"会员卡类型下无此卡",m7:"验证码发送量已达今日上限",m8:"您当前的请求太频繁，休息一下5分钟后再尝试",m9:"请发送验证码进行短信验证",m10:"请输入短信验证码",m11:"短信验证码有误，请重新获取",m12:"短信验证码已超时，请重新获取",m13:"手机号有误，请重新尝试",m14:"会员卡已存在，不能重复绑定"},requestState:{getSendCodePhone:!0,save:!0}},t),this.sel=this.options.sel,this.el=$(this.sel)};$.extend(AccSearchInput.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this,e=t.options.hrefParma;e.actype&&$("#actype").html(t.options.ACTYPE[e.actype]||""),e.acnum&&$("#acnum").val(e.acnum),e.acphone&&$("#acphone").val(e.acphone)},_save:function(t){var e=this;t.state=util.OPT_STATE.UPDATE,util.api({surl:root.MB_API_PATH+"modacc",data:t,type:"post",beforeSend:function(){e.options.requestState.save=!1},success:function(t){var a=t.rpco;switch(a){case 200:util.href("accsuccess.html");break;case 40001:util.tip(e.options.msg.m11);break;case 40002:util.tip(e.options.msg.m12);break;case 40003:util.tip(e.options.msg.m13);break;case 40004:util.tip(e.options.msg.m14);break;default:util.tip("保存失败")}},complete:function(){e.options.requestState.save=!0}})},save:function(){var t=this,e=t.options.hrefParma.actype,a=t.options.hrefParma.acnum,i=t.options.hrefParma.acrdm;return e?t.options.ACTYPE[e]?a?!!i&&void(t.options.requestState.save&&t._save({actype:e,acnum:a,acrdm:i})):(util.tip(t.options.msg.m3),!1):(util.tip(t.options.msg.m2),!1):(util.tip(t.options.msg.m1),!1)},addEvent:function(){var t=this,e=util.getClick();t.options.hrefParma;t.el.on(e,"#save",function(){t.save()})}});