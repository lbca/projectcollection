/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},SetMeiFuNum=function(t){this.options=$.extend({sel:"",hrefParma:util.getHrefParma(),mfREG:/^[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]*$/,numREG:/^\d+$/,msg:{m1:"请输入美服号",m2:"美服号只支持字母和数字",m3:"美服号支持6~16位字符",m4:"该美服号已存在",m5:"美服号不能为纯数字"},requestState:{save:!0}},t),this.sel=this.options.sel,this.el=$(this.sel)};$.extend(SetMeiFuNum.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this;t.options.hrefParma},_save:function(t){var e=this;util.api({surl:root.MB_API_PATH+"bindmsdn",data:{mbsn:t},type:"post",beforeSend:function(){e.options.requestState.save=!1},success:function(t){var i=t.rpco;switch(i){case 200:util.href("set.html");break;case 40001:util.tip(e.options.msg.m4);break;default:util.tip("保存失败")}},complete:function(){e.options.requestState.save=!0}})},save:function(){var t=this,e=$("#value").val()||"";return!!t.options.requestState.save&&(e?t.options.numREG.test(e)?(util.tip(t.options.msg.m5),!1):t.options.mfREG.test(e)?e.length<6||e.length>16?(util.tip(t.options.msg.m3),!1):void t._save(e):(util.tip(t.options.msg.m2),!1):(util.tip(t.options.msg.m1),!1))},addEvent:function(){var t=this,e=util.getClick();t.options.hrefParma;t.el.on(e,"#save",function(){t.save()})}});