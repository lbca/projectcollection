/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},OrdersStaEty=function(t){this.options=$.extend({sel:"",hrefParma:util.getHrefParma(),orderstate:{1:" ",2:" ",3:" ",9:" ",20:"已预约",21:"下单成功",22:"取消成功",23:"已确认",24:"待评价",25:"已评价",41:"已预付",42:"支付成功",43:"已申请退款",44:"退款申请通过",45:"退款成功",81:"已接单",82:"预约成功",83:"预约失败",84:"已出库",85:"已转运",86:"已妥投",87:"已拒收"},msg:{m1:"请输入昵称"}},t),this.sel=this.options.sel,this.el=$(this.sel)};$.extend(OrdersStaEty.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this,e=t.options.hrefParma;t.getEntityOrderStateDetail(e.otn,e.dodt)},getEntityOrderStateDetail:function(t,e){var i=this;util.api({surl:root.AS_API_PATH+"etodsta",data:{otn:t,dodt:e},type:"get",success:function(t){var e=t.rpco,s=t.body||{};switch(e){case 200:i.renderEntityOrderStateDetail(s);break;case 404:util.comShow({txt:"非常抱歉，您访问的订单不存在",icl:"i-page"});break;default:util.tip("查询失败")}}})},renderEntityOrderStateDetail:function(t){var e=this,i="",s=t.sdfmcl||[],a="";e.options.hrefParma.otn&&$("#otn").html(e.options.hrefParma.otn),t.gdiul&&$("#gdiul").attr("src",t.gdiul),t.gdnm&&$("#gdnm").html(t.gdnm),t.gdpr&&$("#gdpr").html(parseFloat(t.gdpr/100).toFixed(2)),t.gdnu&&$("#gdnu").html(t.gdnu),i&&$("#atdvt").html(i);for(var r=0,d=s.length;r<d;r++)a+='<li class="'+(0===r?"cur":"")+(r===d-1?" last":"")+'"><div class="list-text-title tod">'+(e.options.orderstate[s[r].sdfmst]||"&nbsp;")+'</div><div class="text-detail">'+(s[r].sdfmwd||"&nbsp;")+'</div><span class="topright">'+util.formateDate(s[r].sdfmtm,"yyyy-MM-dd hh:mm")+"</span></li>";a?$("#sdfmcl").html('<ul class="list-text">'+a+"</ul>").show():$("#sdfmcl").remove()},addEvent:function(){var t=this;util.getClick(),t.options.hrefParma}});