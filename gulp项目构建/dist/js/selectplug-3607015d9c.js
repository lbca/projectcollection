/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},SelectPlug=function(l){this.options=$.extend({selectList:[],okFn:function(){that.el.hide()},canFn:function(){that.el.hide()},iscroll:[],iScrollConfig:{scrollX:!1,scrollY:!0,bounce:!1,probeType:3,snap:"li"},sel:".js-selectplug",hrefParma:util.getHrefParma()},l),this.sel=this.options.sel,this.el=$(this.sel),this.init()};$.extend(SelectPlug.prototype,{init:function(){var l=this;l.load(),l.addEvent()},load:function(){var l=this;l.options.hrefParma;l.renderSelect(l.options.selectList),l.initIscroll()},initIscroll:function(){var l=this;$(".selectplug-data").each(function(t,e){var s=l.options.selectList[t]||{},o=l.creatIscroll(e,s);l.options.iscroll.push(o)})},creatIscroll:function(l,t){var e=this;return iscroll=new IScroll(l,e.options.iScrollConfig),zsEL=$(l).find(".js-selectdatazs"),function(l){iscroll.on("scroll",function(){l.css("top",this.y)})}(zsEL),t.beforeScrollStart&&iscroll.on("beforeScrollStart",t.beforeScrollStart),t.scrollCancel&&iscroll.on("scrollCancel",t.scrollCancel),t.scrollStart&&iscroll.on("scrollStart",t.scrollStart),t.scroll&&iscroll.on("scroll",t.scroll),t.scrollEnd&&iscroll.on("scrollEnd",t.scrollEnd),t.flick&&iscroll.on("flick",t.flick),iscroll},reLoadSelectData:function(l,t){var e=this,s=$(l.wrapper),o=e.getSelectDataHtml(t.selectData);return s.html(o),e.scrollDestroy(l),e.creatIscroll(s.get(0),t)},renderSelect:function(l){for(var t,e,s=this,o="",r=0,c=l.length;r<c;r++)t=l[r],e=t.selectData||[],o+='<div class="selectplug-data" '+(t.width?'style="width: '+t.width+';"':"")+">"+s.getSelectDataHtml(e)+"</div>";$(".js-selectplugSelected").html(o)},getSelectDataHtml:function(l){for(var t,e='<ul class="selectplug-data-xn js-selectdataxn">',s='<ul class="selectplug-data-zs js-selectdatazs">',o=0,r=l.length;o<r;o++)e+='<li value="'+l[o].value+'">&nbsp;</li>',s+='<li class="js-selectdatazs" value="'+l[o].value+'">'+l[o].name+"</li>";return e+="</ul>",s+="</ul>",t=e+s},scrollDestroy:function(l){l&&l.destroy()},scrollRefresh:function(l){l&&l.refresh()},refreshAllScroll:function(){for(var l=this,t=l.options.iscroll,e=0,s=t.length;e<s;e++)t[e]&&t[e].refresh()},getAllSelectValue:function(l){for(var t=this,e=[],s=0,o=l.length;s<o;s++)e.push(t.getSelectValue(l[s]));return e},getSelectValue:function(l){var t=$(l.wrapper),e=Math.abs(l.y/t.find(".js-selectdataxn li:first").height()),s=t.find(".js-selectdataxn li").eq(e),o=s.attr("value")||"";return o},getSelectLabelValue:function(l){var t=$(l.wrapper),e=Math.abs(l.y/t.find(".js-selectdatazs li:first").height()),s=t.find(".js-selectdatazs li").eq(e),o=s.html()||"";return o},addEvent:function(){var l=this,t=util.getClick();l.options.hrefParma;l.el.on(t,".js-okBtn",function(){l.options.okFn()}),l.el.on(t,".js-canBtn",function(){l.options.canFn()})}});