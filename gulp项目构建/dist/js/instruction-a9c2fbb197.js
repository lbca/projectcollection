/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=root||window;util=root.util||{};var Introduction=function(t){this.options=$.extend({hrefParma:util.getHrefParma(),contTitle:"",altText:'<p class="text-alt">点击按钮加载详情</p>',idSet:{},renderPara:"",btnAll:!1,show:!1,myScroll:!0,scrollPara:{eventPassthrough:!0,scrollX:!0,freeScroll:!0},headTxt:""},t),this.link=this.options.link+".html",this.sel=this.options.sel,this.el=$(this.sel)};$.extend(Introduction.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this,n=t.options.hrefParma;t.options.headTxt=n.headTxt,t.instructionuseBtn(),t.instructionuseempBtn(),t.request(n)},renderTreeTwo:function(t){var n,i,e,o=this,s="",r=t||{},a=r.clst||[],d=r.pc||"",l=r.pid||"",c=r.cn||"";o.options.contTitle=c,e="padding-big",d='<div class="content" id="content">'+o.options.altText+'</div><div class="menu"><span id="menu" pid='+l+"></span></div>";for(var p=0,u=a.length;p<u;p++){var h=a[p];c=h.cn||"",n=h.pid||"",i=h.cade||"",s+='<div class="click-tip" pid='+n+" cade="+i+">"+c+"</div>"}s=d+'<div id="catalog" class="catalog '+e+'">'+s+"</div>",o.render(s,o.options.renderPara)},renderCatalogTwo:function(t){var n,i,e,o=this,s="",r=t||{},a=r.clst||[],d=r.cn||"";o.options.contTitle=d,e="padding-small";for(var l=0,c=a.length;l<c;l++){var p=a[l];d=p.cn||"",n=p.pid||"",i=p.cade||"",s+='<div class="click-tip" pid='+n+" cade="+i+">"+d+"</div>"}s='<div id="catalog" class="catalog '+e+'">'+s+"</div>",o.render(s,o.options.renderPara)},renderContent:function(t){var n=this,i="",e=t||{},o=e.pc||"",s=e.ppid||"",r=e.rpid||"",a=e.npid||"",d={},l=e.cn||"";n.options.contTitle=l,n.options.btnAll=!0,d.ppid=s||"",d.npid=a||"",d.rpid=r||"",n.options.idSet=d,i='<div class="content" id="content">'+o+"</div>",n.options.btnAll=!0,n.clickEvent=null,n.render(i,n.options.renderPara)},renderChildContent:function(t){var n=this,i=t||{},e=i.pc||"";n.options.renderPara="childContent",n.options.show=!1,$("#content").append(e),$("#content p").addClass("disable"),$("#menu").addClass("bg-img")},render:function(t,n){var i=this,e=i.options.hrefParma,o=i.options.contTitle;("instructionuse"!==i.options.link||parseInt(i.options.hrefParma.pid))&&("instructionuseemp"!==i.options.link||parseInt(i.options.hrefParma.pid))?parseInt(i.options.hrefParma.pid)?$("#title").html(o):$("#title").html(i.options.headTxt):$("#title").html(o),$(".container").html(t),e.pid&&i.renderBtn()},toggleBtn:function(t,n,i){i?$(t).addClass(n):$(t).removeClass(n)},renderBtn:function(){var t=this,n=(t.options.idSet,t.options.hrefParma);parseInt(n.pid)?$("#mainCatalog").show():$("#mainCatalog").hide(),t.options.btnAll&&$(".container").addClass("hsft"),t.options.btnAll?$(".footer").show():$(".footer").hide()},instructionuseBtn:function(){var t=this;"instructionuse"!==t.options.link||parseInt(t.options.hrefParma.pid)||$(".goBack").attr("href","javascript:util.href('index.html');")},instructionuseempBtn:function(){var t=this;"instructionuseemp"!==t.options.link||parseInt(t.options.hrefParma.pid)||$(".goBack").attr("style","display:none")},clickEvent:function(){var t=this;$("#content p").removeClass("disable"),$("#content").children(".img,.table,.text,.listtext-fh,.listtext-bh").addClass("disable"),$("#menu").removeClass("bg-img"),t.options.show=!0},request:function(t,n){var i=this;switch(i.options.link){case"instruction":i.getInstruction(t,n);break;case"instructionuse":i.getInstructionUse(t,n);break;case"instructionuseemp":i.getInstructionUseEmp(t,n)}},getInstruction:function(t,n){var i,e,o=this,s=o.options.hrefParma,r="";i=t.pid||0,n&&(r=1),util.api({surl:root.EDOC_API_PATH+"pmdq",data:{pid:i,gid:s.gid,did:s.did,tmid:s.tmid,cade:r},type:"get",beforeSend:function(){},success:function(t){var i=t.rpco,s=t.body||{},r=parseInt(s.cade);switch(e=1===r?"renderContent":3===r?"renderTreeTwo":"renderCatalogTwo",n&&(e="renderChildContent"),i){case 200:o[e](s);break;case 404:}},complete:function(){}})},getInstructionUse:function(t,n){var i,e,o=this,s=(o.options.hrefParma,"");i=t.pid||0,n&&(s=1),util.api({surl:root.EDOC_API_PATH+"usmuqr",data:{pid:i,cade:s},type:"get",beforeSend:function(){},success:function(t){var i=t.rpco,s=t.body||{},r=parseInt(s.cade);switch(e=1===r?"renderContent":3===r?"renderTreeTwo":"renderCatalogTwo",n&&(e="renderChildContent"),i){case 200:o[e](s);break;case 404:}},complete:function(){}})},getInstructionUseEmp:function(t,n){var i,e,o=this,s=(o.options.hrefParma,"");i=t.pid||0,n&&(s=1),util.api({surl:root.EDOC_API_PATH+"clmuqr",data:{pid:i,cade:s},type:"get",beforeSend:function(){},success:function(t){var i=t.rpco,s=t.body||{},r=parseInt(s.cade);switch(e=1===r?"renderContent":3===r?"renderTreeTwo":"renderCatalogTwo",n&&(e="renderChildContent"),i){case 200:o[e](s);break;case 404:}},complete:function(){}})},scrollTable:function t(){var n=this,t=$(".table");t.each(function(t,i){new IScroll(i,n.options.scrollPara)}),n.options.myScroll=!1},addEvent:function(){var t=this,n=util.getClick(),i=t.options.hrefParma,e={};e.headTxt=t.options.headTxt,e.gid=i.gid,e.did=i.did,e.tmid=i.tmid,t.el.on(n,"#mainCatalog",function(){e.pid=0,util.href(t.link,e)}),t.el.on(n,"#content",function(){return t.clickEvent&&t.clickEvent(),!1}),t.el.on(n,"#menu",function(){var n={pid:$(this).attr("pid")};if("childContent"!==t.options.renderPara)return void t.request(n,"1");var i=$("#content"),e=$(i).children("p"),o=$(i).children(".img,.table,.text,.listtext-bh,.listtext-fh");t.options.show?(t.options.show=!1,t.toggleBtn(e,"disable",!t.options.show),t.toggleBtn(o,"disable",t.options.show),t.toggleBtn($("#menu"),"bg-img",!t.options.show)):(t.options.show=!0,t.toggleBtn(e,"disable",!t.options.show),t.toggleBtn(o,"disable",t.options.show),t.toggleBtn($("#menu"),"bg-img",!t.options.show),t.options.myScroll&&t.scrollTable())}),t.el.on(n,".click-tip",function(){var n=$(this).attr("pid");e.pid=n,util.href(t.link,e)}),t.el.on(n,"#prev",function(){e.pid=t.options.idSet.rpid,util.href(t.link,e)}),t.el.on(n,"#next",function(){e.pid=t.options.idSet.npid,util.href(t.link,e)}),t.el.on(n,"#prevCatalog",function(){e.pid=t.options.idSet.ppid,util.href(t.link,e)})}});