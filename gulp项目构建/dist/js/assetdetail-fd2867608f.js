/**
 * yidao
 * created by 用车前端组
 */
"use strict";var root=window||{},util=root.util||{},AssetDetail=function(t){this.options=$.extend({sel:"",hrefParma:util.getHrefParma(),asnum:"",maxupcount:2,upcount:0,instrData:{gid:0,did:0,tmid:536940544,headTxt:""},msg:{m1:"没有找到该资产",m2:"上传成功",m3:"上传失败",m4:"删除成功",m5:"删除失败",m6:"发票图片最多上传2张",m7:"资产图片上传成功",m8:"该功能暂未开通，敬请期待"},requestState:{saveAseqinimg:!0,delAseqinimg:!0}},t),this.sel=this.options.sel,this.el=$(this.sel)};$.extend(AssetDetail.prototype,{init:function(){var t=this;t.load(),t.addEvent()},load:function(){var t=this,i=t.options.hrefParma;t.options.asnum=i.asnum,t.getAssetDetail(i.asnum)},renderAssetDetail:function(t){var i=t.asmus||[],s=$("#list");t.aseilist||[];t.asimgu&&$("#asimgu").attr("src",t.asimgu),t.asname&&$("#asname").html(t.asname);for(var a=0,n=i.length;a<n;a++)s.append($("#menu"+i[a]).show())},getAssetDetail:function(t){var i=this;util.api({surl:root.AS_API_PATH+"assdtal",data:{asnum:t},type:"get",success:function(t){var s=t.rpco,a=t.body||{};switch(s){case 200:i.options.instrData.gid=a.gid,i.options.instrData.did=a.did,i.options.instrData.headTxt=a.asname,i.renderAssetDetail(a);break;default:util.tip("查询失败")}}})},addEvent:function(){var t=this,i=util.getClick(),s=t.options.hrefParma;t.el.on(i,"#asewcu",function(){util.href("electrcard.html",{asnum:s.asnum})}),t.el.on(i,"#aspmu",function(){t.options.instrData.gid&&util.href("instruction.html",{gid:t.options.instrData.gid,did:t.options.instrData.did,tmid:t.options.instrData.tmid,headTxt:t.options.instrData.headTxt})}),t.el.on(i,"#serviceType a",function(){util.tip(t.options.msg.m8)})}});